<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://www.w3.org/Tools/respec/respec-w3c" async class=
    "remove"></script>
    <script class="remove">
      // All config options at https://respec.org/docs/
      var respecConfig = {
        // Working Groups ids at https://respec.org/w3c/groups/
        specStatus: "base",
        editors: [
          {
            name: "Marcos Cáceres",
          },
        ],
        latestVersion: null,
        // See https://respec.org/docs/#xref for usage.
        xref: "web-platform",
      };
    </script>
    <style>
      .pass {
        background-color: green;
        color: white;
      }
      .fail {
        background-color: red;
        color: white;
      }
      .fail a,
      .fail a:link,
      .fail a:visited {
        color: white !important;
      }
    </style>
    <title>
      Geolocation - Implementation Report
    </title>
  </head>
  <body>
    <section id="abstract">
      <p>
        This is an implementation report for [[Geolocation]].
      </p>
    </section>
    <h2>
      Test results
    </h2>
    <p>
      The following tests verify conformance to [[Geolocation]].
    </p>
    <h3>
      Status legend
    </h3>
    <dl>
      <dt>
        PASS
      </dt>
      <dd>
        The test ran successfully and the implementation conforms to the
        specification.
      </dd>
      <dt>
        FAIL
      </dt>
      <dd>
        The test ran and the implementation does not conform to the
        specification.
      </dd>
      <dt>
        UNTESTED
      </dt>
      <dd>
        The test could not be run due to test automation infrastructure
        limitations (e.g., missing [[webdriver-bidi]] support). This does not
        indicate an implementation failure.
      </dd>
    </dl>
    <h3>
      WebKit testing limitations
    </h3>
    <p>
      Some tests cannot be run in WebKit's automated test infrastructure due to
      platform limitations. These do not indicate missing implementation
      support in WebKit/Safari, but rather gaps in test automation
      infrastructure:
    </p>
    <dl>
      <dt id="webkit-bidi">
        WebDriver BiDi support
      </dt>
      <dd>
        WebKit has not yet implemented the WebDriver BiDi support. This is
        required to set permissions and mock geolocation data using
        [[webdriver-bidi]] commands such as `emulation.setGeolocationOverride`.
      </dd>
      <dt id="webkit-permissions-policy">
        Permissions-Policy HTTP header
      </dt>
      <dd>
        WebKit has not yet implemented <a href=
        "https://webkit.org/b/253126">Permissions-Policy HTTP header
        support</a>.
        <p class="note">
          Support for the `Permissions-Policy` HTTP header is not a conformance
          requirement for [[Geolocation]]; it simply declares geolocation as a
          policy-controlled feature with a default allowlist of `'self'`. HTTP
          header support is defined by [[permissions-policy]]. The [^iframe^]
          [^iframe/allow^] attribute (e.g., `&lt;iframe
          allow="geolocation"&gt;`) is supported and works correctly in WebKit.
        </p>
      </dd>
    </dl>
    <h3>
      Gecko testing limitations
    </h3>
    <p>
      Some tests cannot be run in Gecko's (Firefox) wptrunner infrastructure due
      to missing [[webdriver-bidi]] integration in wptrunner:
    </p>
    <dl>
      <dt id="gecko-bidi">
        wptrunner BiDi integration
      </dt>
      <dd>
        <p>
          Firefox 139+ has implemented [[webdriver-bidi]] commands at the browser
          level, including `emulation.setGeolocationOverride` (<a href=
          "https://bugzilla.mozilla.org/show_bug.cgi?id=1954992">Bug 1954992</a>)
          and BrowsingContext geolocation override (<a href=
          "https://bugzilla.mozilla.org/show_bug.cgi?id=1951962">Bug 1951962</a>).
          However, wptrunner's Marionette executor does not yet wire up the BiDi
          protocol for Firefox.
        </p>
        <p>
          <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1984611">Bug
          1984611</a> tracks adding WebDriver BiDi implementation for Firefox in
          wptrunner. Until this is resolved, tests requiring the following
          testdriver.bidi actions cannot run:
        </p>
        <ul>
          <li>
            `test_driver.bidi.permissions.set_permission` - required for tests
            that need to grant geolocation permissions programmatically.
          </li>
          <li>
            `test_driver.bidi.emulation.set_geolocation_override` - required for
            tests that need to mock geolocation data.
          </li>
        </ul>
      </dd>
    </dl>
    <h3>
      Results table
    </h3>
    <table class="simple data">
      <tr>
        <th>
          Test
        </th>
        <th>
          Chromium
        </th>
        <th>
          Gecko
        </th>
        <th>
          WebKit
        </th>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/clearWatch_TypeError.https.html">clearWatch_TypeError.https.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/disabled-by-permissions-policy.https.sub.html">
          disabled-by-permissions-policy.https.sub.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="fail">
          FAIL
        </td>
        <td>
          <a href="#webkit-permissions-policy" title=
          "no Permissions-Policy header">UNTESTED</a>
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/enabled-by-permission-policy-attribute-redirect-on-load.https.sub.html">
          enabled-by-permission-policy-attribute-redirect-on-load.https.sub.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td>
          <a href="#gecko-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
        <td>
          <a href="#webkit-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/enabled-by-permission-policy-attribute.https.sub.html">
          enabled-by-permission-policy-attribute.https.sub.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/enabled-by-permissions-policy.https.sub.html">
          enabled-by-permissions-policy.https.sub.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td>
          <a href="#gecko-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
        <td>
          <a href="#webkit-permissions-policy" title=
          "no Permissions-Policy header">UNTESTED</a>
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/enabled-on-self-origin-by-permissions-policy.https.sub.html">
          enabled-on-self-origin-by-permissions-policy.https.sub.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td>
          <a href="#gecko-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
        <td>
          <a href="#webkit-permissions-policy" title=
          "no Permissions-Policy header">UNTESTED</a>
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/getCurrentPosition_permission_deny.https.html">
          getCurrentPosition_permission_deny.https.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/getCurrentPosition_TypeError.https.html">
          getCurrentPosition_TypeError.https.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/getCurrentPosition-error.https.html">getCurrentPosition-error.https.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td>
          <a href="#gecko-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
        <td>
          <a href="#webkit-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/getCurrentPosition-success.https.html">getCurrentPosition-success.https.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td>
          <a href="#gecko-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
        <td>
          <a href="#webkit-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/idlharness.https.window.html">idlharness.https.window.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/non-fully-active.https.html">non-fully-active.https.html</a>
        </td>
        <td class="fail">
          FAIL
        </td>
        <td>
          <a href="#gecko-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
        <td>
          <a href="#webkit-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "http://wpt.live/geolocation/non-secure-contexts.http.html">non-secure-contexts.http.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/permission.https.html">permission.https.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/PositionOptions.https.html">PositionOptions.https.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td>
          <a href="#gecko-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/tojson.https.window.html">tojson.https.window.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td>
          <a href="#gecko-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
        <td>
          <a href="#webkit-bidi" title="requires WebDriver BiDi">UNTESTED</a>
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/watchPosition_permission_deny.https.html">
          watchPosition_permission_deny.https.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/watchPosition_TypeError.https.html">watchPosition_TypeError.https.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
      <tr>
        <td>
          <a href=
          "https://wpt.live/geolocation/watchposition-timeout.https.window.html">
          watchposition-timeout.https.window.html</a>
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
        <td class="pass">
          PASS
        </td>
      </tr>
    </table>
    <h2>
      Is each feature of the current specification implemented, and how is this
      demonstrated?
    </h2>
    <p>
      The current specification features are implemented across major browsers
      including Chrome, Firefox, and Safari. This is demonstrated through the
      aforementioned WPT, which verify the implementation of the
      specification's features, such as obtaining the location, handling
      permissions, and responding to errors.
    </p>
    <h2>
      Are there independent interoperable implementations of the current
      specification?
    </h2>
    <p>
      Yes, there are independent interoperable implementations in the major web
      browsers. Chrome, Firefox, and Safari provide their own implementations,
      which have been tested to ensure they conform to the [[Geolocation]]
      specification and are interoperable across different platforms and
      operating systems.
    </p>
    <h2>
      Are there implementations created by people other than the authors of the
      specification?
    </h2>
    <p>
      Yes, implementations of Geolocation have been created by various browser
      vendors who are not necessarily the authors of the specification. This
      includes engineers from Google, Mozilla, Microsoft, and Apple, among
      others, ensuring a broad base of experience and design input is reflected
      in the API.
    </p>
    <h2>
      Are implementations publicly deployed?
    </h2>
    <p>
      Yes, the implementations of Geolocation are publicly deployed and widely
      used in web applications. These are accessible in consumer-level
      browsers, allowing developers to incorporate geolocation features into
      their websites and applications, enhancing user experience with
      location-based services.
    </p>
    <h2>
      Is there implementation experience at all levels of the specification's
      ecosystem (authoring, consuming, publishing…)?
    </h2>
    <p>
      There is substantial implementation experience at all levels of the
      specification's ecosystem. Developers use the API to author
      location-based services, consumers use these features in daily web
      interactions, and publishers integrate these capabilities into various
      applications for enhanced location-dependent experiences.
    </p>
    <h2>
      Are there reports of difficulties or problems with implementation?
    </h2>
    <p>
      While the core functionality of Geolocation is well-supported, developers
      occasionally report difficulties related to privacy concerns, varying
      accuracy levels, and handling user permissions across different browsers
      and devices. These issues are typically addressed through updates to the
      specification (see <a href=
      "https://github.com/w3c/geolocation/issues">open issues</a>) and
      improvements in browser implementations.
    </p>
  </body>
</html>
